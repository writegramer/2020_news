(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"2doW":function(e,t,n){"use strict";n("T3IU"),n("DZyD");var o=n("PJYZ"),r=n.n(o),a=n("VbXa"),i=n.n(a),s=n("lSNA"),c=n.n(s),d=(n("T7D0"),n("ERkP")),l=n("mN6z"),u=n("pVnL"),p=n.n(u),h=n("8OQS"),f=n.n(h),m=n("gt4B"),v=n("aWzz"),w=n("1SjZ"),_=(n("PN9k"),n("yKDW"),n("dtAy"),n("FwvS")),y=n("3XMw"),b=n.n(y),g=n("D4le"),C=n.n(g),T=n("3xO4"),x=n.n(T),I=n("0Ki6"),E=n("r1lV"),M=n("rHpw"),P=n("JYMr"),S=b.a.d33241c5,O=b.a.a54d17e1,D=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,c()(r()(t),"state",{loadingVariant:null,imageLoading:!1}),c()(r()(t),"_handleLoadStart",(function(){return t.setState({imageLoading:!0})})),c()(r()(t),"_handleLoadEnd",(function(){return t.setState({imageLoading:!1})})),t}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._mountPromiseForTesting=t._selectCachedVariant(this.props.photo).then((function(t){return e.setState({loadingVariant:t})}))},n.componentDidUpdate=function(e,n){var o=this;Object(l.a)(e.photo,this.props.photo)||(this.setState({loadingVariant:null}),t._selectCachedVariant(this.props.photo).then((function(e){return o.setState({loadingVariant:e})})))},n.render=function(){var e=this.props,n=e.dataSaver,o=e.onContextMenu,r=e.onError,a=e.onLoad,i=e.onTap,s=e.onZoomed,c=e.photo,l=e.resetZoom,u=e.zoomable,p=e.style,h=this.state.loadingVariant,f=(n&&h&&Math.max(h.width,h.height)>=680?h.uri:null)||t._selectSource(c);if(!f||null===h)return null;var m=d.createElement(C.a,{accessibilityLabel:c.ext_alt_text?c.ext_alt_text:S,defaultSource:h&&h.uri,draggable:!0,onContextMenu:o,onError:h?void 0:r,onLoad:a,onLoadEnd:this._handleLoadEnd,onLoadStart:this._handleLoadStart,resizeMode:"contain",source:f,style:R.img});return d.createElement(x.a,{style:p},this.state.imageLoading?j:null,u?d.createElement(I.a,{onTap:i,onZoomed:s,resetZoom:l},m):m)},t._selectCachedVariant=function(e){var t=_.c(e);return t?E.a.selectLargestCachedVariant(t):Promise.resolve()},t._selectSource=function(e){var t=_.c(e);return t&&E.a.selectLargestUrl(t)},t}(d.PureComponent);c()(D,"defaultProps",{zoomable:!1});var R=M.a.create((function(e){return{img:Object.assign({},M.a.absoluteFillObject,{height:"auto",margin:"auto",maxHeight:"100%",maxWidth:"100%",width:"auto"}),progressBar:{position:"absolute",top:0,zIndex:1}}})),j=d.createElement(P.a,{ariaValueText:O,indeterminate:!0,style:R.progressBar}),k=D,L=n("RCZO"),A=n("KdqI"),U=n("TrHT"),F=n("Modb"),Z=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,c()(r()(t),"_handlePlaybackStarted",(function(){t._player&&!t.props.isCurrentlyDisplayed&&t._player.pause()})),c()(r()(t),"_setPlayer",(function(e){t._player=e,t._player&&t.props.isCurrentlyDisplayed&&t._player.play()})),t}i()(t,e);var n=t.prototype;return n.render=function(){var e=this.props.style;return d.createElement(x.a,{style:e},d.createElement(x.a,{style:V.root},this._renderVideo()))},n.componentDidUpdate=function(e){var t=this.props.isCurrentlyDisplayed;this._player&&t!==e.isCurrentlyDisplayed&&(t?this._player.play():this._player.pause())},n._renderVideo=function(){var e=this.props,t=e.promotedContent,n=e.video,o=e.videoId;return d.createElement(F.a,p()({},Object(U.a)(o,n),{onPlaybackStarted:this._handlePlaybackStarted,playbackCoordination:null,promotedContent:t,setPlayer:this._setPlayer,withPostPlayback:!0}))},t}(d.PureComponent),V=M.a.create({root:{flexBasis:0,flexGrow:1,flexShrink:1,justifyContent:"center"}}),N=Z,B=n("ziVO"),z=n("TGLq"),H=n.n(z),W=b.a.if6c9fc1,X=b.a.bf4d1538,G=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,c()(r()(t),"state",{error:null,contextMenuPoint:{top:0,left:0},showContextMenu:!1,mediaDimensions:void 0}),c()(r()(t),"_handleError",(function(e){t.setState({error:e.nativeEvent.error})})),c()(r()(t),"_handleLoad",(function(){t.setState({error:null})})),c()(r()(t),"_handleMediaPress",(function(e){e.stopPropagation()})),c()(r()(t),"_handleRetry",(function(){t.setState({error:null})})),c()(r()(t),"_handleContextMenu",(function(e){Object(A.e)()&&(e.preventDefault(),e.stopPropagation(),t.setState({contextMenuPoint:{left:e.clientX,top:e.clientY}}),t.setState({showContextMenu:!0}))})),c()(r()(t),"_handleContextCancel",(function(){return t.setState({showContextMenu:!1})})),c()(r()(t),"_handleOpenImageURI",(function(){H.a.openURL(t.props.mediaDetail.media_url_https),t._handleContextCancel()})),c()(r()(t),"_getContextMenuItems",(function(){return[{text:X,onClick:t._handleOpenImageURI}]})),c()(r()(t),"_handleLayout",(function(e){var n=e.nativeEvent.layout,o=n.height,r=n.width,a=t.props.mediaDetail.original_info||{},i=a.width,s=a.height,c=Object(L.e)({mediaWidth:i,mediaHeight:s,containerWidth:r,containerHeight:o});t.setState({mediaDimensions:c})})),t}i()(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!Object(l.a)(e,this.props)||!Object(l.a)(t,this.state)},n.UNSAFE_componentWillReceiveProps=function(e){this.setState({error:null,showContextMenu:!1})},n.render=function(){var e,t=this.props,n=t.isCurrentlyDisplayed,o=t.mediaDetail,r=t.onDismiss,a=t.onTap,i=t.promotedContent,s=t.videoId,c=f()(t,["isCurrentlyDisplayed","mediaDetail","onDismiss","onTap","promotedContent","videoId"]),l=this.state,u=l.error,h=l.showContextMenu,v=l.mediaDimensions,_=this.context.isModal;return o&&(e=["animated_gif","video","vine"].indexOf(o.type)>-1),d.createElement(B.a,{onDismiss:r,onLayout:_?this._handleLayout:void 0,style:J.root},u?d.createElement(w.a,{onRetry:this._handleRetry,style:J.errorDetail,title:W,withLightOnDarkColorScheme:!0}):null,h?d.createElement(m.a,{items:this._getContextMenuItems(),onCloseRequested:this._handleContextCancel,position:this.state.contextMenuPoint}):null,u?null:d.createElement(x.a,{onClick:this._handleMediaPress,style:_?v:J.mediaItem},"photo"===o.type?d.createElement(k,p()({},c,{onContextMenu:this._handleContextMenu,onError:this._handleError,onLoad:this._handleLoad,onTap:a,photo:o,style:J.container,zoomable:!0})):null,e&&s?d.createElement(N,{isCurrentlyDisplayed:n,promotedContent:i,style:J.container,video:o,videoId:s}):null))},t}(d.Component);c()(G,"contextTypes",{isModal:v.bool});var J=M.a.create((function(e){return{root:{flexGrow:1,justifyContent:"center",alignItems:"center",flexShrink:1},mediaItem:{flexGrow:1,width:"100%",height:"100%"},container:{height:"100%",position:"absolute",width:"100%"},errorDetail:{alignItems:"center",alignSelf:"center",justifyContent:"center",position:"absolute",height:"100%",maxWidth:400}}})),q=G,K=n("fs1G"),Q=n("lklz"),Y=n("uavX"),$=function(e){return Q.b.forTweet(e.expanded_url.split("/")[3])},ee=function(e){function t(t,n){var o;return o=e.call(this,t,n)||this,c()(r()(o),"_isItemVideo",(function(e){return["video","animated_gif","vine"].includes(e.type)})),c()(r()(o),"_getItemVideoId",(function(e){return o.props.videoId||$(e)})),c()(r()(o),"_handleMediaDetailZoomed",(function(e){var t=o.props.onMediaDetailZoomed;o.state.isZoomed!==e&&o.setState({isZoomed:e}),t&&t(e)})),o.state={isZoomed:!1},o}i()(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!Object(l.a)(e,this.props)||!Object(l.a)(t,this.state)},n.render=function(){var e=this,t=this.props,n=t.dataSaver,o=t.dominantColor,r=t.mediaIndex,a=t.mediaItems,i=t.onDismiss,s=t.onMediaItemChanged,c=t.onTap,l=t.promotedContent,u=this.state.isZoomed,p=a.map((function(t,o){var s=e._isItemVideo(t),p=e._getItemVideoId(t),h=r===o;return s&&p||!s?d.createElement(q,{dataSaver:n,isCurrentlyDisplayed:h,key:o,mediaDetail:a[o],onDismiss:u?void 0:i,onTap:c,onZoomed:h?e._handleMediaDetailZoomed:void 0,promotedContent:l,resetZoom:r!==o,videoId:p}):null}));return d.createElement(x.a,{style:te.root},a.length>1?d.createElement(Y.a,{currentSlide:r,dominantColor:o,locked:u||1===a.length,onChange:s,withReducedNavButtonClickArea:!!this._isItemVideo(a[r])},p):p)},t}(d.Component);c()(ee,"defaultProps",{mediaIndex:0,onMediaDetailZoomed:K.a,onMediaItemChanged:K.a});var te=M.a.create((function(e){return{root:{flex:1,zIndex:1}}}));t.a=ee},AUxQ:function(e,t,n){"use strict";var o=n("PJYZ"),r=n.n(o),a=n("VbXa"),i=n.n(a),s=n("lSNA"),c=n.n(s),d=n("PiaM"),l=n("ERkP"),u=n("rxPX"),p=Object(u.a)().propsFromState({isTimelineTerminatedAtTop:function(e,t){var n=t.module.selectTimeline(e);return!!n&&n.terminatedStatus.atTop},contextualClientEventInfo:function(e,t){return t.location.state&&t.location.state.contextualClientEventInfo}}),h=n("I7xG"),f=n("3XMw"),m=n.n(f),v=n("v6aA"),w=n("VTxf"),_=n("SrIh"),y=n("fTQJ"),b=n("IRWI"),g=n("wgnn"),C=n("yhJW"),T=m.a.gccad761,x=function(e){switch(e){case g.a.NOT_FOUND:return l.createElement(w.a,null);default:return Object(_.a)("Unhandled timeline unavailable reason: "+e),null}},I=function(){return l.createElement(w.a,null)},E=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,c()(r()(t),"_isInitialFocusEntry",(function(e,n){var o=t.props.focalTweetId;return n>0&&e&&e.content&&!!e.content.id&&e.content.id===o})),c()(r()(t),"_getPreprocessor",Object(h.a)(r()(t),(function(e){return e.socialContext}),(function(e){return e.contextTweetId}),(function(e){return e.contextualClientEventInfo}),(function(e){return e.promotedContent}),(function(e){return e.focalTweetId}),(function(e){return e.selectedTweet}),(function(e){return e.conversationTreeEnabled}),(function(e){return e.isTimelineTerminatedAtTop}),(function(e){return e.withFocalTweetMedia}),(function(e,t,n,o,r,a,i,s,c){return i?Object(C.a)({focalTweetId:r,contextTweetId:t,contextualClientEventInfo:n,socialContext:e,selectedTweet:a,promotedContent:o,isTimelineTerminatedAtTop:s,hideMedia:!c}):Object(C.c)({focalTweetId:r,contextTweetId:t,contextualClientEventInfo:n,socialContext:e,promotedContent:o})}))),c()(r()(t),"_getEntryConfig",Object(h.a)(r()(t),(function(e){return!!e.rootTweet&&e.rootTweet.user.id_str}),(function(e,t,n){return n.context.loggedInUserId}),(function(e){return e.withFocalTweetMedia}),(function(e,t,n){var o=t&&e&&t===e;return Object(C.b)({isCurrentUserRootAuthor:!!o,withFocalTweetMedia:n})}))),t}i()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.apiErrorHandlerMap,n=e.fetchOptions,o=e.module,r=e.onEntriesUpdate;return l.createElement(y.a,{anchoring:b.a,apiErrorHandlerMap:t,entryConfiguration:this._getEntryConfig(),fetchOptions:n,isInitialFocusEntry:this._isInitialFocusEntry,module:o,olderAtTop:!0,onEntriesUpdate:r,preprocessEntryList:this._getPreprocessor(),previewEntries:this._previewEntries(),renderEmptyState:I,renderUnavailable:x,title:T})},n._previewEntries=function(){var e=this.props,t=e.conversationTreeEnabled,n=e.focalTweet;return n&&!t?[d.i({id:n.id_str,sortIndex:n.id_str})]:void 0},t}(l.Component);c()(E,"defaultProps",{withFocalTweetMedia:!0}),c()(E,"contextType",v.a);var M=p(E);t.a=M},TGLq:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var o,r=n("6/RC"),a=(o=n("tI3i"))&&o.__esModule?o:{default:o};var i=r.canUseDOM?window.location.href:"",s={addEventListener:function(){},removeEventListener:function(){},canOpenURL:function(){return Promise.resolve(!0)},getInitialURL:function(){return Promise.resolve(i)},openURL:function(e){try{return c(e),Promise.resolve()}catch(t){return Promise.reject(t)}},_validateURL:function(e){(0,a.default)("string"==typeof e,"Invalid URL: should be a string. Was: "+e),(0,a.default)(e,"Invalid URL: cannot be empty")}},c=function(e){r.canUseDOM&&(window.location=new URL(e,window.location).toString())},d=s;t.default=d,e.exports=t.default},W5XZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o,r=n("k49u"),a=n("fs1G"),i=((o={})[r.a.OtherUserSuspended]={customAction:a.a},o[r.a.StatusViewForbidden]={customAction:a.a},o)},ckGq:function(e,t,n){"use strict";var o=n("R972"),r=(n("ERkP"),n("6vad"));t.a=o.d(o.f({divider:{top:!0,bottom:!1},component:r.a,createProps:function(e){var t=e.entry.content;return{text:t.text,subtext:t.subtext,withBottomBorder:!1}}}))},gpRP:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,n("PN9k");var o=s(n("7DT3")),r=s(n("/uF9")),a=s(n("ERkP")),i=s(n("OkZJ"));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,o.default)("svg",Object.assign({},e,{style:[i.default.root,e.style,r.default.isRTL&&i.default.iconRtl],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M21.185 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.145.146.337.22.53.22s.383-.073.53-.22l9.25-9.25c.293-.295.293-.77 0-1.062z"}),a.default.createElement("path",{d:"M13.376 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.146.145.337.218.53.218s.384-.073.53-.22l9.25-9.25c.293-.293.293-.767 0-1.06z"})))};c.metadata={height:24,width:24};var d=c;t.default=d},rkhm:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("k49u"),r=n("fs1G"),a=n("LVU8"),i=function(e){var t;return void 0===e&&(e=""),(t={})[o.a.GenericNotFound]={customAction:r.a},t[o.a.NotAuthorizedToViewUser]={customAction:function(){Object(a.d)("/"+e,{statusCode:401})}},t[o.a.StatusViewForbidden]={customAction:function(){Object(a.d)("/"+e)}},t.showToast=!0,t}},rrZY:function(e,t,n){"use strict";var o=n("ERkP"),r=o.createContext(!1);t.a=r},u1Qz:function(e,t,n){"use strict";n.r(t);n("rmZQ"),n("PN9k");var o=n("PJYZ"),r=n.n(o),a=n("VbXa"),i=n.n(a),s=n("lSNA"),c=n.n(s),d=n("ERkP"),l=n("gt4B"),u=n("aWzz"),p=(n("NlgC"),n("rxPX")),h=n("0KEI"),f=n("P1r1"),m=n("H9MA"),v=n("XOJV"),w=function(e,t){return t.match.params.screenName},_=function(e,t){return t.match.params.statusId},y=function(e,t){var n=t.match.params.index;return parseInt(n,10)-1},b=function(e,t){return v.a.selectFetchStatus(e,_(0,t))},g=function(e,t){return e.location&&e.location.state&&e.location.state[t]},C=function(e,t){return g(t,"promotedContent")},T=function(e,t){return g(t,"socialContext")},x=function(e,t){return g(t,"contextTweetId")},I=function(e,t){var n=_(0,t),o=v.a.select(e,n);return o&&o.conversation_id_str||void 0},E=Object(p.a)().dynamicPropsFromState((function(){return{fetchStatus:b,index:y,screenName:w,tweetId:_,tweet:v.a.createHydratedTweetSelector(_),promotedContent:C,dataSaver:m.c,socialContext:T,contextTweetId:x,rootTweet:v.a.createHydratedTweetSelector(I),conversationTreeEnabled:f.h,showTweetMediaDetailDrawer:f.v}})).propsFromActions({createLocalApiErrorHandler:Object(h.b)("TWEET_MEDIA_DETAIL_SCREEN"),fetchTweetIfNeeded:v.a.fetchOneIfNeeded,updateSettings:f.E}).withAnalytics({page:"tweet",section:"media"}),M=(n("cI1W"),n("ZUOq")),P=n("ymux"),S=n("rkhm"),O=n("I7xG"),D=n("wrlS"),R=n("AUxQ"),j=n("rHpw"),k=n("rrZY"),L=n("yw4N"),A=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,c()(r()(t),"_focalTweetMediaEnabled",D.a.isTrue("responsive_web_media_viewer_m2_focal_tweet_media_enabled")),c()(r()(t),"_getApiErrorHandlerMap",Object(O.a)(r()(t),(function(e){return e.screenName}),(function(e){return Object(S.a)(e)}))),c()(r()(t),"_getModule",Object(O.a)(r()(t),(function(e){return e.tweetId}),(function(e){return e.conversationTreeEnabled}),(function(e,t){return Object(P.a)({focalTweetId:e,conversationTreeEnabled:t})}))),t}return i()(t,e),t.prototype.render=function(){var e=this.props,t=e.contextTweetId,n=e.conversationTreeEnabled,o=e.location,r=e.tweet,a=e.tweetId,i=e.promotedContent,s=e.rootTweet,c=e.socialContext;return d.createElement(L.a,{"aria-expanded":"true",style:U.root},d.createElement(k.a.Provider,{value:!0},d.createElement(R.a,{apiErrorHandlerMap:this._getApiErrorHandlerMap(),contextTweetId:t,conversationTreeEnabled:n,focalTweet:r,focalTweetId:a,location:o,module:this._getModule(),promotedContent:i,rootTweet:s,socialContext:c,withFocalTweetMedia:this._focalTweetMediaEnabled})))},t}(d.Component),U=j.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,overflow:"auto",width:M.a.columnWidths.secondary.normal,borderLeftWidth:e.borderWidths.small,borderColor:e.colors.borderColor,borderStyle:"solid"}}})),F=A,Z=n("v//M"),V=n("W5XZ"),N=n("RCZO"),B=n("kp0V"),z=n("3XMw"),H=n.n(z),W=n("zcjS"),X=n.n(W),G=n("gpRP"),J=n.n(G),q=n("/aF9"),K=n.n(q),Q=n("6/RC"),Y={};var $=["touchend","touchmove","touchstart"],ee=function(){return Q.canUseDOM&&$.some((function(e){return!!function(e,t){if(void 0!==Y[e])return Y[e];var n=document.createElement(t||"div"),o="on"+e,r=o in n;return r||(n.setAttribute(o,"return;"),r="function"==typeof n[o]),Y[e]=r,r}(e)}))},te=n("2doW"),ne=n("UPvq"),oe=n("VTxf"),re=n("wiP2"),ae=n("Rp9C"),ie=n("xXop"),se=n("lklz"),ce=n("3xO4"),de=n.n(ce),le=n("/yvb");n.d(t,"TweetMediaDetailScreen",(function(){return me}));var ue=H.a.i34631db,pe=H.a.hdebbb20,he=H.a.d8b55a6c,fe=H.a.c13b567b,me=function(e){function t(t,n){var o;return o=e.call(this,t,n)||this,c()(r()(o),"_renderMediaModal",(function(){var e=o.props.fetchStatus,t=o._shouldHideButtons(),n=o._getCurrentMediaItem(),r=Object(N.b)(n),a=o._touchSupported&&o._isCurrentMediaItemPhoto();return d.createElement(ne.a,{backgroundColor:r,footerButtons:o._renderFooter(),hideButtons:t,mediaItem:n,onCloseButtonPress:o._handleClose,overlayFooter:a,topRightButton:o._renderTopRightButton()},d.createElement(Z.a,{accessibilityLabel:ue,fetchStatus:e,onRequestRetry:o._handleFetchTweet,render:o._renderContent}))})),c()(r()(o),"_renderMediaModalWithDrawer",(function(){var e=o.props,t=e.contextTweetId,n=e.location,r=e.tweetId,a=e.tweet,i=e.promotedContent,s=e.rootTweet,c=e.socialContext,l=e.conversationTreeEnabled,u=e.showTweetMediaDetailDrawer,p=e.screenName;return d.createElement(de.a,{style:ve.container},d.createElement(de.a,{style:ve.neighbor},o._renderMediaModal()),u?d.createElement(F,{contextTweetId:t,conversationTreeEnabled:l,location:n,promotedContent:i,rootTweet:s,screenName:p,socialContext:c,tweet:a,tweetId:r}):null)})),c()(r()(o),"_handleToggleDrawer",(function(){var e=o.props,t=e.showTweetMediaDetailDrawer,n=e.updateSettings;e.analytics.scribe({component:"conversation_drawer",action:t?"collapse":"expand"}),n({showTweetMediaDetailDrawer:!t})})),c()(r()(o),"_getPermalink",(function(){var e=o.props.tweet;return e&&e.user?"/"+e.user.screen_name+"/status/"+e.id_str:"/"})),c()(r()(o),"_renderOverflowMenu",(function(e){return d.createElement(l.a,{isFixed:!0,items:[{link:o._getPermalink(),text:pe}],onCloseRequested:e})})),c()(r()(o),"_getExtendedMedia",(function(){var e=o.props.location.state;if(e){var t=e.mediaItems;return t&&"index"in t&&"items"in t?t:void 0}})),c()(r()(o),"_getIndex",(function(){var e=o._getExtendedMedia();return e?e.index:o.props.index})),c()(r()(o),"_getMediaItems",(function(){var e=o._getExtendedMedia();if(e)return e.items;var t=o.props.tweet;return t?t.extended_entities&&t.extended_entities.media||t.card&&t.card.media:void 0})),c()(r()(o),"_getLocationState",(function(e){var t=o._getExtendedMedia(),n=o.props.location;return t?Object.assign({},n.state,{mediaItems:Object.assign({},t,{index:e})}):n.state})),c()(r()(o),"_isCurrentMediaItemPhoto",(function(){var e=o._getIndex(),t=o._getMediaItems();if(!t)return!1;var n=t[e];return n&&"photo"===n.type})),c()(r()(o),"_handleMediaItemTapped",(function(){o._touchSupported&&o.setState((function(e){return{showControls:!e.showControls}}))})),c()(r()(o),"_renderContent",(function(){var e=o.props,t=e.dataSaver,n=e.promotedContent,r=e.tweet,a=o._getIndex(),i=o._getMediaItems();if(!i)return d.createElement(oe.a,null);var s=i[a],c=Object(N.b)(s).rgb;return d.createElement(te.a,{dataSaver:t,dominantColor:c,mediaIndex:a,mediaItems:i,onDismiss:o._handleClose,onMediaDetailZoomed:o._handleMediaDetailZoomed,onMediaItemChanged:o._handleMediaItemChanged,onTap:o._handleMediaItemTapped,promotedContent:n,videoId:1===i.length&&r?se.b.forTweet(r.id_str):void 0})})),c()(r()(o),"_handleClose",(function(){var e=o.props,t=e.history,n=e.location,r=o._getPermalink();Object(B.a)({backLocation:r,history:t,location:n})})),c()(r()(o),"_getPermalink",(function(){var e=o.props.tweet;return e&&e.user?"/"+e.user.screen_name+"/status/"+e.id_str:"/"})),c()(r()(o),"_possiblyRedirectToCanonical",(function(){var e=o.props,t=e.history,n=e.screenName,r=e.tweet;if(r&&r.user&&n.toLowerCase()!==r.user.screen_name.toLowerCase()){var a=o._getCanonicalPath();a&&t.replace(a)}})),c()(r()(o),"_getCanonicalPath",(function(){var e=o.props,t=e.index,n=e.tweet;return n&&n.user?"/"+n.user.screen_name+"/status/"+n.id_str+"/photo/"+(t+1):null})),c()(r()(o),"_handleFetchTweet",(function(){var e=o.props,t=e.createLocalApiErrorHandler;(0,e.fetchTweetIfNeeded)(e.tweetId).catch(t(V.a))})),c()(r()(o),"_handleMediaDetailZoomed",(function(e){o.setState({isZoomed:e,showControls:!e})})),c()(r()(o),"_handleMediaItemChanged",(function(e){var t=o.props,n=t.history,r=t.analytics,a=o._getIndex(),i=o._getMediaItems();if(e!==a){r.scribe({component:"gallery",element:a<e?"next":"prev",action:"click",data:{event_value:e+1}});var s=i&&i[e];n.replace({state:o._getLocationState(e),pathname:s&&s.expanded_url})}})),c()(r()(o),"_scribeImpression",(function(){var e=o.props,t=e.analytics,n=e.tweet;if(n){var r=ae.a.getTweetItem(n);t.scribe({action:"show",data:{items:[r]}})}})),o.state={showControls:!0,isZoomed:!1},o._drawerEnabled=o.context.isModal&&D.a.isTrue("responsive_web_media_viewer_m2_sidebar_enabled"),o._tweetActionsBarEnabled=D.a.isTrue("responsive_web_media_viewer_m2_tweet_actions_bar_enabled"),o._touchSupported=ee(),o}i()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._handleFetchTweet(),this._scribeImpression()},n.componentDidUpdate=function(e){var t,n;this._possiblyRedirectToCanonical(),e.tweetId!==this.props.tweetId&&this._handleFetchTweet(),(null===(t=e.tweet)||void 0===t?void 0:t.id_str)!==(null===(n=this.props.tweet)||void 0===n?void 0:n.id_str)&&this._scribeImpression()},n.render=function(){return d.createElement(re.a.Configure,{headerless:!0},this._drawerEnabled?this._renderMediaModalWithDrawer():this._renderMediaModal())},n._getCurrentMediaItem=function(){var e=this._getIndex(),t=this._getMediaItems();return t&&t[e]},n._shouldHideButtons=function(){var e=this.state,t=e.isZoomed,n=e.showControls;return t||!n},n._renderTopRightButton=function(){var e=this.props,t=e.tweet,n=e.showTweetMediaDetailDrawer,o=this._getCurrentMediaItem(),r=Object(N.b)(o);return this._drawerEnabled?d.createElement(le.a,{accessibilityLabel:n?fe:pe,dominantColor:r.rgb,icon:n?d.createElement(J.a,null):d.createElement(X.a,null),onClick:this._handleToggleDrawer,type:"onMedia"}):t&&!this._drawerEnabled?d.createElement(le.a,{accessibilityLabel:he,dominantColor:o?r.rgb:void 0,icon:d.createElement(K.a,null),renderMenu:this._renderOverflowMenu,type:o?"onMedia":"invertedPrimary"}):void 0},n._renderFooter=function(){var e=this.props.tweet,t=this.context.isModal;return e&&this._tweetActionsBarEnabled||e&&!t?d.createElement(ie.a,{actionSize:"large",activeColor:"white",color:"white",style:ve.actionsBar,tweet:e,withCount:!0}):void 0},t}(d.Component);c()(me,"contextTypes",{isModal:u.bool});var ve=j.a.create((function(e){return{actionsBar:{height:e.spaces.xxLarge,marginTop:0,maxWidth:"none",paddingHorizontal:e.spaces.xSmall},container:{flexDirection:"row",overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%",position:"relative"},neighbor:{flexGrow:1,flexShrink:1}}})),we=E(me);t.default=we},yhJW:function(e,t,n){"use strict";n.d(t,"c",(function(){return C})),n.d(t,"a",(function(){return T}));n("PN9k");var o=n("R972"),r=n("PiaM"),a=n("xZXe"),i=n("P1oR"),s=n("VPAj"),c=n("QIgh"),d=n("8UdT"),l=n("zrc3"),u=n("caTy"),p=n("NO+D"),h=n("ckGq"),f=n("IcAo"),m=n("zh9S"),v=n("gdQ4"),w=n("yvCK"),_=n("euJ+"),y=n("VrCx"),b=n("yy6l"),g=n("G6rE");t.b=function(e){var t,n,r,l=e.isCurrentUserRootAuthor,C=e.withFocalTweetMedia;return Object(f.a)({},c.b,((r={})[d.a.Tweet]={handlers:(t={},t[y.a.Tweet]=Object(b.a)({component:a.a,createAdditionalProps:function(e,t,n){var o=n.applyFeedbackAction,r={};r.withHideReply=l,r.withUnhideReply=!1,r.withViewHiddenReplies=!0,r.withMuteConversation=!0;var a=!!(e.content&&e.content.hasModeratedReplies&&e.conversationPosition&&e.conversationPosition.isStart);return r.hasModeratedReplies=a,l&&(r.onTweetDismiss=function(){return o({entry:e,feedbackKeys:[_.d]})}),r}}),t[y.a.Focal]=Object(b.a)({component:i.a,createAdditionalProps:function(e,t,n){var o=n.applyFeedbackAction,r=e.content,a=r.hasModeratedReplies,i=r.tombstoneInfo,s=e.referringContext,c=e.conversationPosition,d=s||{},u=d.contextTweetId,p=d.socialContext,h=d.promotedContent,f=!!(a&&c&&c.isStart);return Object.assign({contextTweetId:u,hasModeratedReplies:f,socialContext:p,promotedContent:h,tombstoneInfo:i,withHideReply:l,withTweetMedia:C},l?{onTweetDismiss:function(){return o({entry:e,feedbackKeys:[_.d]})}}:{})},dismissable:!0,divider:function(e){return{top:!1,bottom:!1}}}),t)},r[d.a.Tombstone]={handlers:(n={},n.FocalTweetInlineTombstone=Object(p.a)({createAdditionalProps:function(e){var t=e.referringContext||{};return{contextTweetId:t.contextTweetId,isFocalTweet:!0,socialContext:t.socialContext,withHideReply:l}},shouldDisplayBorder:Object(s.a)(!0)}),n[w.a.Inline]=Object(p.a)({createAdditionalProps:function(e,t){var n=t.applyFeedbackAction;return{onTweetDismiss:l?function(){return n({entry:e,feedbackKeys:[_.d]})}:void 0,withHideReply:l}},shouldDisplayBorder:function(e){return!e||!e.conversationPosition||!!e.conversationPosition.isStart&&!!e.conversationPosition.isEnd}}),n)},r[d.a.Label]=h.a,r[d.a.TweetComposer]=o.d(o.f({component:v.a,bindActions:Object(s.a)({scribe:m.c}),selectData:function(e){e.entry,e.module;return{loggedInUser:function(e){return g.e.selectLoggedInUser(e)}}},createProps:function(e){var t=e.data.loggedInUser,n=void 0===t?{}:t,o=e.entry,r=e.actions.scribe,a=e.scribeNamespace,i=Object(u.a)(o.content.url.url);return{avatarUrl:n.profile_image_url_https,onClick:function(){return r(Object.assign({},a,{element:"add_to_thread",action:"click"}))},onImpression:function(){return r(Object.assign({},a,{element:"add_to_thread",action:"impression"}))},to:i?Object.assign({},i,{state:Object.assign({},i.state||{},{isSelfThreadReply:!0})}):void 0,userName:n.screen_name,withButton:!0,withConversationLine:o.withConversationLine}},shouldDisplayBorder:Object(s.a)(!1),divider:{top:!1,bottom:!0}})),r))};var C=function(e){var t=e.focalTweetId,n=e.contextTweetId,o=e.contextualClientEventInfo,r=e.socialContext,a=e.promotedContent,i=e.hideAncestorTweets,s=function(e){return e.type===d.a.Tweet&&e.content.id===t||e.type===d.a.Tombstone&&!!e.content&&!!e.content.tweet&&e.content.tweet.id===t};return function(e){var t=Object(l.a)(e,s),c=!1;return e.map((function(e,s){var l=s>t;if(e.type!==d.a.Tweet&&e.type!==d.a.Tombstone||l)return e;var u=!c;if(c=!0,s<t){if(i)return null;if(e.type===d.a.Tweet)return P(e,u);if(e.type===d.a.Tombstone)return S(e,u)}else{if(e.type===d.a.Tombstone){var p={isStart:u,isEnd:!0};return e.content.displayType===w.a.Inline?E({contextTweetId:n,entry:e,socialContext:r,conversationPosition:p}):M({entry:e,conversationPosition:p})}if(e.type===d.a.Tweet)return I({originalEntry:e,contextTweetId:n,contextualClientEventInfo:o,socialContext:r,promotedContent:a,conversationPosition:{isStart:u,isEnd:!0,position:"focal",showReplyContext:!1}})}})).filter(Boolean)}},T=function(e){var t=e.focalTweetId,n=e.contextTweetId,o=e.contextualClientEventInfo,r=e.socialContext,a=e.selectedTweet,i=e.promotedContent,s=e.isTimelineTerminatedAtTop,c=e.hideMedia;return function(e){return e.map((function(e,l){return e.type===d.a.Tombstone?e.content.displayType===w.a.Inline?E({contextTweetId:n,entry:e,socialContext:r}):M({entry:e}):e.type===d.a.TimelineModule?x({entry:e,referringContext:{focalTweetId:t,promotedContent:i,contextTweetId:n,contextualClientEventInfo:o,socialContext:r,hideMedia:c},selectedTweet:a,isRootEntryPresent:s}):e})).filter(Boolean)}},x=function(e){var t=e.entry,n=e.referringContext,o=e.selectedTweet,r=e.isRootEntryPresent,a=t.content||{};return Object.assign({},t,{referringContext:n,content:Object.assign({},a,{selectedTweet:o,showSmallAvatars:!0,isRootEntryPresent:r})})},I=function(e){var t=e.originalEntry,n=e.contextTweetId,o=e.contextualClientEventInfo,a=e.socialContext,i=e.promotedContent,s=e.conversationPosition;return r.f(Object.assign({},t,{conversationPosition:s,referringContext:{contextTweetId:n,contextualClientEventInfo:o,socialContext:a,promotedContent:i}}),{displayType:y.a.Focal})},E=function(e){var t=e.entry,n=e.contextTweetId,o=e.conversationPosition,a=e.socialContext;return r.f(Object.assign({},t,{conversationPosition:o,referringContext:{contextTweetId:n,socialContext:a}}),{displayType:"FocalTweetInlineTombstone"})},M=function(e){var t=e.entry,n=e.conversationPosition;return Object.assign({},t,{conversationPosition:n})},P=function(e,t){return Object.assign({},e,{conversationPosition:{isStart:t,isEnd:!1,position:"ancestor",showReplyContext:!1}})},S=function(e,t){return Object.assign({},e,{conversationPosition:{isStart:t,isEnd:!1,position:"ancestor"}})}},zcjS:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,n("PN9k");var o=s(n("7DT3")),r=s(n("/uF9")),a=s(n("ERkP")),i=s(n("OkZJ"));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return void 0===e&&(e={}),(0,o.default)("svg",Object.assign({},e,{style:[i.default.root,e.style,r.default.isRTL&&i.default.iconRtl],viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M4.656 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L4.655 12z"}),a.default.createElement("path",{d:"M12.465 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L12.464 12z"})))};c.metadata={height:24,width:24};var d=c;t.default=d}}]);
//# sourceMappingURL=https://ton.smf1.twitter.com/responsive-web-internal/sourcemaps/web/bundle.TweetMediaDetail.b8903484.js.map